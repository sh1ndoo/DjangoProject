{% extends 'base.html' %}

{% block content %}
        <h1>События в городе Красноярск</h1>

        <nav class="category-filters">
            <ul>
                {% for category in event_cats %}
                    <li><button onclick="window.location.href = '{{ category.get_absolute_url }}';" class="{% if category.slug_name == event_cat_selected %}btn btn-filter-cat active{% else %}btn btn-filter-cat{% endif %}">{{ category.name }}</button></li>
                {% endfor %}
            </ul>
            <ul>
                {% for tag in event_tags %}
                    <li><button onclick="window.location.href = '{{ category.get_absolute_url }}';" class="{% if category.slug_name == event_cat_selected %}btn btn-filter-tag active{% else %}btn btn-filter-tag{% endif %}">{{ tag.name }}</button></li>
                {% endfor %}
            </ul>
        </nav>
        <div class="content-wrapper">
            <main class="main-content">
                <section class="event-grid">

                    {% for event in events %}
                    <article class="event-card">
                        <a href={{event.get_absolute_url}}>
                            <img src='{{ event.logo }}' alt="Фестиваль Космонавт"> <!-- Alt text should be dynamic -->
                        </a>
                        <div class="event-card-content">
                            <h2>{{ event.name }}</h2>
                            <p class="event-description line-clamp">{{ event.anons }}</p>
                            <div class="event-details">
                                <span class="event-date"><i class="fas fa-calendar-alt"></i> до {{ event.time_end_no_hour }}</span>
                                <span class="event-location"><i class="fas fa-map-marker-alt"></i>{{ event.places.0.name }}</span>
                            </div>
                            <div class="event-price">{% if event.is_free %}Бесплатно{% else %}{{ event.min_price }}₽{% endif %}</div>
                        </div>
                    </article>
                    {% endfor %}
                </section>
            </main>

            <div class="sidebar">
                <aside class="sidebar-filters">
                    <div class="filter-group">
                        <h3>Когда</h3>
                        <div class="filter-options button-group">
                            <!-- Changed btn-filter to btn-filter-tag -->
                            <button class="btn btn-filter-tag active">сегодня</button>
                            <button class="btn btn-filter-tag">завтра</button>
                            <button class="btn btn-filter-tag full-width">на выходных</button>
                            <!-- Changed btn-filter-secondary to btn-filter-select -->
                            <button class="btn btn-filter-select full-width">Выбрать даты</button>
                        </div>
                    </div>

                    <div class="filter-group">
                        <h3>Во сколько</h3>
                         <div class="filter-options button-group">
                            <!-- Changed btn-filter to btn-filter-tag -->
                            <button class="btn btn-filter-tag">утром</button>
                            <button class="btn btn-filter-tag">днём</button>
                             <button class="btn btn-filter-tag active full-width">вечером</button>
                            <!-- Changed btn-filter-secondary to btn-filter-select -->
                            <button class="btn btn-filter-select full-width">Выбрать время</button>
                        </div>
                    </div>

                    <div class="filter-group">
                        <h3>Сколько</h3>
                        <div class="filter-options price-range">
                            <div class="price-inputs">
                                <span>от 0 ₽</span>
                                <span>до 30000 ₽</span>
                            </div>
                            <input type="range" min="0" max="30000" value="15000" class="price-slider">
                        </div>
                    </div>

                    <button class="btn btn-primary full-width reset-filters">Сбросить фильтры</button>
                </aside>

                <aside class="sidebar-filters">
                    <img src='{{ cat_url }}' class='hero-event-image' alt="Случайный котик">
                    <div class="text-center">Случайный котик :3</div>
                </aside>
            </div>
        </div>
{% endblock %}